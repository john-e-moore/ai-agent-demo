<!-- 741f626a-8943-49a2-bfcf-ceed670f2169 35dc9e87-7406-442b-9e04-b2e2311e48fa -->
# FRED Labor-Market Enhancements Plan

## 1. Align on data requirements and series configuration

- Identify specific FRED series IDs for:
- Overall unemployment rate, labor-force participation, and median weekly earnings.
- Age sub-groups (e.g., 16–19, 20–24, 25–54, 55+; adjust to what FRED supports) for each of those metrics.
- Define a config structure (e.g., in `config/fredSeries.ts` or similar) that maps:
- A logical key (e.g., `unemployment_total`, `unemployment_16_19`) to a FRED series ID and human-readable label.
- A high-level grouping (e.g., `unemployment`, `participation`, `earnings`) and sub-group meta (age band).
- Decide on default pair to show (e.g., overall unemployment vs participation for all workers) when the page loads.

## 2. Extend data fetching layer for FRED labor series

- Locate the existing FRED client/utilities (e.g., `fredClient.ts`, `data/fred.ts`, or wherever FRED calls are made).
- Add functions to fetch:
- A single series by ID.
- Multiple series in one call, if the current architecture supports batching (e.g., `fetchSeriesBatch(seriesIds: string[])`).
- Ensure the API layer:
- Normalizes FRED responses into a common time-series type (date + numeric value) with metadata for series key and label.
- Handles rate limiting and simple error handling (showing a user-friendly message if FRED is unavailable).
- Wire the new labor-series config into the fetch logic so the UI can request arbitrary pairs or groups by logical key instead of raw IDs.

## 3. Update data model and state management for charted series

- Define or extend a `TimeSeries`/`Series` model so that each series includes:
- `id`, `label`, `group` (unemployment/participation/earnings), and `ageBand` metadata.
- In the view model or React state (e.g., `LaborChartContainer`), maintain:
- The currently selected x-series and y-series (e.g., unemployment vs participation) and their age bands.
- Whether dual axes are enabled.
- Ensure state updates trigger refetching only when the underlying FRED series keys change, with basic loading and error states.

## 4. Implement labor-market series selection UI

- In the page/component that owns the chart (e.g., `LaborMarketDashboard.tsx` or existing dashboard screen):
- Add dropdowns or segmented controls that allow users to choose:
- Metric for series A and series B (unemployment, participation, earnings).
- Age band for series A and series B (e.g., All, 16–19, 20–24, etc.).
- Default to a sensible pair (e.g., unemployment vs participation for All workers) on load.
- Ensure that when the user selects, for example, `unemployment` and `participation` with age band `16–19`, the component:
- Resolves these selections into the correct configured FRED series IDs.
- Triggers the appropriate data fetch and passes the prepared series into the chart.

## 5. Add dual-axis toggle next to the chart

- In the chart container component, add a simple checkbox or toggle control labeled something like "Dual y-axes".
- Wire this control to a `dualAxisEnabled` boolean in component state.
- Update the chart configuration (for the chosen charting library, e.g., Recharts, Chart.js, ECharts, etc.) so that:
- When `dualAxisEnabled` is false, both series share the same y-axis.
- When `dualAxisEnabled` is true, series B is mapped to a secondary y-axis (`yAxisId="right"` or equivalent), with its own scale.
- Adjust axis styling and legend/tooltips so users can clearly distinguish which series is on which axis (e.g., color-coding, axis labels on left/right).

## 6. Add logo as a light background watermark behind the chart

- Identify or add the logo asset (e.g., `assets/logo.svg` or `public/logo.png`).
- In the chart container layout:
- Wrap the chart in a positioned container (e.g., `position: relative`).
- Add an absolutely positioned `img` or background layer for the logo that:
- Is centered within the chart area.
- Uses low opacity (e.g., 0.04–0.08) and possibly grayscale to avoid competing with data.
- Sits behind chart content via `z-index` and pointer-events disabled.
- If the charting library supports custom background rendering, evaluate using that API instead of raw CSS to ensure the watermark doesn’t interfere with tooltips or interactions.

## 7. Polish, performance, and UX

- Confirm that age-subgroup series are aligned in time (e.g., identical date domains when comparing unemployment vs participation) and handle missing data gracefully (e.g., gaps rather than misleading lines).
- Add loading and error indicators near the chart area while FRED data is being fetched.
- Consider simple caching or memoization of previously fetched series to avoid refetching the same series when users toggle axes or navigate back to prior selections.
- Verify responsive behavior: ensure the logo watermark scales sensibly and the dual-axis labels remain legible on smaller viewports.

## 8. Documentation and tests

- Update `README.md` (or a feature-specific doc) to describe:
- The available labor-market metrics and age sub-groups.
- How dual axes work and when to use them.
- Add or extend tests (unit/integration) for:
- FRED data fetching for the new series config.
- State logic that maps metric/age selections to FRED series IDs.
- Chart config behavior when dual axes are toggled.
- Manually verify a few representative scenarios:
- Overall unemployment vs participation.
- Unemployment vs participation for 16–19 year-olds.
- Any earnings comparison where dual axes significantly improve readability.

### To-dos

- [ ] Define and document FRED labor-market series config (totals and age sub-groups) and default charted pair.
- [ ] Extend FRED data fetching utilities to support the new labor series and expose a batch/multi-series API.
- [ ] Update data models and chart container state to handle metric/age selections and dual-axis flag.
- [ ] Implement UI controls for selecting metrics and age bands for both charted series.
- [ ] Add dual-axis checkbox and wire it into the chart configuration.
- [ ] Add the logo as a subtle, transparent background watermark behind the chart area.
- [ ] Update documentation and add tests for new data series, selection logic, and dual-axis behavior.