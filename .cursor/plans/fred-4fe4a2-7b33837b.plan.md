<!-- 7b33837b-bb70-444a-a480-2cd374fd8e2e 0f034b2e-d460-4dee-9aa7-a76f452a2082 -->
# FRED dashboard enhancements: metadata, UX, and exports

### 1) Filter and sort series metadata for cleaner dropdowns

- Update `fetchFredCategorySeries` in `lib/fred.ts` so that it filters out any series whose `title` includes `"DISCONTINUED"` (from the FRED `fred/category/series` endpoint).
- In the same helper, sort the returned `FredSeriesMeta[]` **alphabetically by `title`** before returning, so all series dropdowns are ordered.
- In `dashboard.tsx`, also sort `rootCategories` and each `childrenByParent[parentId]` **alphabetically by `name`** when setting state so both category and subcategory dropdowns are ordered.

### 2) Use FRED series names in the chart legend

- Extend `lib/fred.ts` with a small metadata helper against FRED’s `fred/series` endpoint ([FRED API docs](https://fred.stlouisfed.org/docs/api/fred/)):
- `fetchFredSeriesDetails(seriesId: FredSeriesId)` → returns at least `{ id, title, frequency, units }` for a single series.
- Update `fetchFredSeries` so that, in addition to `fred/series/observations`, it fetches the series details (either sequentially or in parallel) and uses `details.title` as the `FredSeriesNormalized.title` instead of defaulting to the ID.
- Ensure `fetchFredSeriesBundle` still only surfaces `{ id, title, units, frequency, values }` but now with the **human-readable FRED series title**, so `DashboardChart`’s legend automatically shows names like “Unemployment Rate - Asian” instead of raw codes.

### 3) Reset chart button in the selection card

- In `dashboard.tsx`, add a small control cluster to the **top-right** of the FRED series selection card header with a `Reset chart` button.
- Implement `handleResetChart` to reset all relevant state:
- `selection` back to `DEFAULT_SELECTION` (all `null` so no series are selected).
- `data` to `null`, `error` and `metaError` to `null`.
- Date-related state (`availableMinDate`, `availableMaxDate`, `selectedMinDate`, `selectedMaxDate`) to their initial empty values.
- `dualAxisEnabled` back to `false`.
- Verify that after reset, the chart shows the placeholder “Choose at least one series to see a chart.” and that no FRED data is fetched until the user picks Series A again.

### 4) Download CSV data for the current chart view

- In `dashboard.tsx`, add a `Download data` button next to `Download PNG` in the chart card header.
- Implement a `handleDownloadData` client-side helper that:
- Early-returns (and keeps the button disabled) if there is no loaded `data` bundle or `activeSeries` is empty.
- Reconstructs the **currently visible date range** using the same rules as `DashboardChart` (i.e., respects `selectedMinDate`/`selectedMaxDate`).
- Builds a CSV string where the first row is `date,<series 1 title>,<series 2 title>` and subsequent rows contain ISO dates plus the corresponding numeric values (or blank for `null`) for each visible series.
- Creates a `Blob` from the CSV, generates an object URL, and triggers a browser download as `fred-dashboard-data.csv`.
- Keep the `Download data` button disabled in sync with `Download PNG` (no data → both disabled).

### 5) Adjust chart color palette to blue and orange

- In `components/DashboardChart.tsx`, update `SERIES_COLORS` so the first two entries are a **blue** and an **orange** color (e.g., `blue-600` and `orange-500` with matching semi-transparent fills).
- If a third color is still needed for future extensions, keep it distinct but secondary; ensure Series A and Series B in the current app clearly map to blue and orange respectively.
- Confirm the legend markers, line colors, and any filled areas all reflect the updated palette while preserving readability and contrast against the recession shading.

### To-dos

- [x] Widen `FredSeriesId` and add FRED metadata helpers in `lib/fred.ts` for categories and series lookups.
- [x] Create `/api/fred/meta` route to proxy FRED category/children/series endpoints and return trimmed metadata.
- [x] Replace metric/age-band selectors with Category → Subcategory → Series dropdowns for Series A and B, wired to the new metadata API.
- [x] Update dashboard data-fetching logic to use selected series IDs, require Series A, and treat Series B as optional.
- [x] Stack selection card above chart card and enforce initial blank chart state and control disabling until data is loaded.